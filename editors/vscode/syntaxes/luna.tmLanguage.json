{
    "name": "Luna",
    "scopeName": "source.luna",
    "patterns": [
        { "include": "#comments" },
        { "include": "#keywords" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#variables" },
        { "include": "#functions" },
        { "include": "#operators" },
        { "include": "#constants" },
        { "include": "#types" }
    ],
    "repository": {
        "comments": {
            "patterns": [
                {
                    "name": "comment.line.number-sign.luna",
                    "match": "#.*$"
                },
                {
                    "name": "comment.block.luna",
                    "begin": "###",
                    "end": "###"
                }
            ]
        },
        "keywords": {
            "patterns": [
                {
                    "name": "keyword.control.luna",
                    "match": "\\b(if|elif|else|for|while|in|return|break|continue|then)\\b"
                },
                {
                    "name": "keyword.control.cosmic.luna",
                    "match": "\\b(orbit|eclipse|phase|shine|nova|guard|seal)\\b",
                    "comment": "Luna v4.2 cosmic keywords"
                },
                {
                    "name": "keyword.control.flow.luna",
                    "match": "\\b(unless|until|match|catch)\\b"
                },
                {
                    "name": "keyword.control.meow.luna",
                    "match": "\\bmeow\\b",
                    "comment": "Static global arrays"
                },
                {
                    "name": "keyword.control.async.luna",
                    "match": "\\b(spawn|await|send)\\b",
                    "comment": "Async/concurrent keywords"
                },
                {
                    "name": "keyword.control.import.luna",
                    "match": "\\b(import|from|as|export)\\b"
                },
                {
                    "name": "keyword.declaration.luna",
                    "match": "\\b(let|fn|struct|const|impl|trait|enum|type)\\b"
                },
                {
                    "name": "keyword.modifier.luna",
                    "match": "\\b(mut|pub|priv|static|unsafe|extern)\\b"
                },
                {
                    "name": "keyword.control.actor.luna",
                    "match": "\\b(actor|sealed|defer)\\b"
                },
                {
                    "name": "storage.type.primitive.luna",
                    "match": "\\b(int|float|str|bool|any|void|u8|u16|u32|u64|i8|i16|i32|i64|f32|f64|usize|isize)\\b"
                },
                {
                    "name": "keyword.operator.logical.luna",
                    "match": "\\b(and|or|not|is|isnt)\\b"
                }
            ]
        },
        "variables": {
            "patterns": [
                {
                    "name": "variable.other.luna",
                    "match": "@[a-zA-Z_][a-zA-Z0-9_]*"
                },
                {
                    "name": "variable.language.self.luna",
                    "match": "\\bself\\b"
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "name": "string.quoted.double.luna",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        {
                            "name": "constant.character.escape.luna",
                            "match": "\\\\."
                        }
                    ]
                },
                {
                    "name": "string.quoted.single.luna",
                    "begin": "'",
                    "end": "'",
                    "patterns": [
                        {
                            "name": "constant.character.escape.luna",
                            "match": "\\\\."
                        }
                    ]
                },
                {
                    "name": "string.quoted.raw.luna",
                    "begin": "r\"",
                    "end": "\""
                },
                {
                    "name": "string.quoted.byte.luna",
                    "begin": "b\"",
                    "end": "\"",
                    "patterns": [
                        {
                            "name": "constant.character.escape.luna",
                            "match": "\\\\."
                        }
                    ]
                }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "name": "constant.numeric.hex.luna",
                    "match": "\\b0x[0-9a-fA-F_]+\\b"
                },
                {
                    "name": "constant.numeric.binary.luna",
                    "match": "\\b0b[01_]+\\b"
                },
                {
                    "name": "constant.numeric.octal.luna",
                    "match": "\\b0o[0-7_]+\\b"
                },
                {
                    "name": "constant.numeric.float.luna",
                    "match": "\\b[0-9][0-9_]*\\.[0-9][0-9_]*([eE][+-]?[0-9_]+)?\\b"
                },
                {
                    "name": "constant.numeric.integer.luna",
                    "match": "\\b[0-9][0-9_]*\\b"
                }
            ]
        },
        "functions": {
            "patterns": [
                {
                    "name": "entity.name.function.luna",
                    "match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()"
                },
                {
                    "name": "support.function.cosmic.luna",
                    "match": "\\b(shine|nova|shine_debug)\\b",
                    "comment": "Luna cosmic output functions"
                },
                {
                    "name": "support.function.builtin.luna",
                    "match": "\\b(print|println|input|str|int|float|bool|len|type|clone|drop)\\b"
                },
                {
                    "name": "support.function.math.luna",
                    "match": "\\b(abs|min|max|sqrt|pow|round|floor|ceil|random|sin|cos|tan|asin|acos|atan|log|log2|log10|exp)\\b"
                },
                {
                    "name": "support.function.string.luna",
                    "match": "\\b(split|join|upper|lower|trim|replace|contains|starts_with|ends_with|char_at|substring|to_uppercase|to_lowercase)\\b"
                },
                {
                    "name": "support.function.collection.luna",
                    "match": "\\b(push|pop|append|reverse|sort|slice|index_of|range_list|map|filter|reduce|find|any|all|zip|enumerate)\\b"
                },
                {
                    "name": "support.function.dict.luna",
                    "match": "\\b(keys|values|has_key|get|set_key|remove_key|insert|remove)\\b"
                },
                {
                    "name": "support.function.io.luna",
                    "match": "\\b(read_file|write_file|append_file|file_exists|delete_file|list_dir|create_dir|stdin_read|stdout_write|stderr_write)\\b"
                },
                {
                    "name": "support.function.util.luna",
                    "match": "\\b(exit|sleep|time|assert|panic|unreachable|todo|dbg)\\b"
                },
                {
                    "name": "support.function.memory.luna",
                    "match": "\\b(force|is_lazy|alloc|dealloc|realloc|copy|move|swap|take)\\b"
                },
                {
                    "name": "support.function.regex.luna",
                    "match": "\\b(regex_match|regex_find|regex_compile|regex_replace|regex_split|regex_find_all)\\b"
                },
                {
                    "name": "support.function.db.luna",
                    "match": "\\b(db_open|db_close|db_put|db_get|db_delete|db_begin|db_commit|db_rollback|db_scan_prefix)\\b"
                },
                {
                    "name": "support.function.http.luna",
                    "match": "\\b(http_get|http_post|http_put|http_delete|http_parse_request|http_response_json|http_response_text|http_response_html|route_add|route_match|url_decode|url_encode)\\b"
                },
                {
                    "name": "support.function.json.luna",
                    "match": "\\b(json_parse|json_stringify|json_get|json_is_valid|json_pretty)\\b"
                },
                {
                    "name": "support.function.crypto.luna",
                    "match": "\\b(sha256|sha256_hex|sha512|hmac_sha256|aes_encrypt|aes_decrypt|random_bytes|uuid_v4|base64_encode|base64_decode)\\b"
                },
                {
                    "name": "support.function.sync.luna",
                    "match": "\\b(mutex_new|mutex_lock|mutex_unlock|rwlock_new|rwlock_read|rwlock_write|channel|channel_send|channel_recv)\\b"
                },
                {
                    "name": "support.function.net.luna",
                    "match": "\\b(tcp_connect|tcp_listen|tcp_accept|udp_bind|udp_send|udp_recv|websocket_connect|websocket_send|websocket_recv)\\b"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.comparison.luna",
                    "match": "(==|!=|<=|>=|<|>)"
                },
                {
                    "name": "keyword.operator.arithmetic.luna",
                    "match": "(\\+|-|\\*|/|%|\\*\\*)"
                },
                {
                    "name": "keyword.operator.assignment.luna",
                    "match": "(=|\\+=|-=|\\*=|/=|%=|&=|\\|=|\\^=|<<=|>>=)"
                },
                {
                    "name": "keyword.operator.range.luna",
                    "match": "\\.\\.=?"
                },
                {
                    "name": "keyword.operator.pipe.luna",
                    "match": "\\|>",
                    "comment": "Pipe operator for functional chaining"
                },
                {
                    "name": "keyword.operator.arrow.luna",
                    "match": "->"
                },
                {
                    "name": "keyword.operator.fat-arrow.luna",
                    "match": "=>"
                },
                {
                    "name": "keyword.operator.null-coalesce.luna",
                    "match": "\\?\\?"
                },
                {
                    "name": "keyword.operator.safe-nav.luna",
                    "match": "\\?\\."
                },
                {
                    "name": "keyword.operator.bitwise.luna",
                    "match": "(<<|>>|&|\\||\\^|~)"
                },
                {
                    "name": "keyword.operator.reference.luna",
                    "match": "&(mut)?"
                }
            ]
        },
        "constants": {
            "patterns": [
                {
                    "name": "constant.language.boolean.luna",
                    "match": "\\b(true|false)\\b"
                },
                {
                    "name": "constant.language.none.luna",
                    "match": "\\b(none|None)\\b"
                },
                {
                    "name": "constant.language.result.luna",
                    "match": "\\b(Ok|Err|Some)\\b"
                }
            ]
        },
        "types": {
            "patterns": [
                {
                    "name": "entity.name.type.luna",
                    "match": "\\b[A-Z][a-zA-Z0-9_]*\\b"
                },
                {
                    "name": "storage.type.generic.luna",
                    "match": "<[^>]+>"
                }
            ]
        }
    }
}
